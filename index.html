<!DOCTYPE html>
<html>

<head>
    <title>Open Apple </title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="title">
        <h1>Flavor Notes of NY</h1>
    </div>
    <div class="search">
      <form class="pure-form">
          <input class="pure-input-1-4" id="address-form" type="text" placeholder="Address">
          <a class="submit-button pure-button pure-button-primary" onclick="myFunction()">Search</a>
          <br/>
      </form>
    </div>

    <br/>

    <div class="pure-g">
    <div class="pure-u-7-24">
      <div class="toggle-div">




          <ul>

              <li>

                  <div id="toggle-button-plum" class="toggle-button plum toggle-button-selected">
                      <button value="0"></button>
                  </div>
                  <p>Plum</p>
              </li>
              <li>

                  <div id="toggle-button-cherry" class="toggle-button cherry toggle-button-selected">
                      <button value="1"></button>
                  </div>
                  <p>Black Cherry</p>
              </li>

              <li>

                  <div id="toggle-button-ginko" class="toggle-button ginko toggle-button-selected">
                      <button value="2"></button>
                  </div>
                  <p>Gingko</p>
              </li>

              <li>

                  <div id="toggle-button-coffee" class="toggle-button coffee toggle-button-selected">
                      <button value="3"></button>
                  </div>
                  <p>Coffee</p>
              </li>

              <li>

                  <div id="toggle-button-cornelian-cherry" class="toggle-button cornelian-cherry toggle-button-selected">
                      <button value="4"></button>
                  </div>
                  <p>Cornelian Cherry</p>
              </li>

              <li>

                  <div id="toggle-button-chinese-chestnut" class="toggle-button chinese-chestnut toggle-button-selected">
                      <button value="5"></button>
                  </div>
                  <p>Chinese Chestnut</p>
              </li>

          </ul>

    </div>
          </div>
    <div class="pure-u-17-24">
  <div id="map"></div>

    </div>
  </div>





    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
    <script src="js/cartomap.js"></script>
    <script>
        function toggleButtonClickEvent(event) {
            $(this).toggleClass('toggle-button-selected');
            var button = event.toElement.children[0];
            button_value = button.value;
            var crap_toggle = $(".cartodb-dropdown")[0].children[0].children[button_value].children[1];
            console.log(crap_toggle);
            crap_toggle.click();
        };
        $("#toggle-button-plum").on('click', toggleButtonClickEvent);
        $("#toggle-button-cherry").on('click', toggleButtonClickEvent);
        $("#toggle-button-ginko").on('click', toggleButtonClickEvent);
        $("#toggle-button-coffee").on('click', toggleButtonClickEvent);
        $("#toggle-button-cornelian-cherry").on('click', toggleButtonClickEvent);
        $("#toggle-button-chinese-chestnut").on('click', toggleButtonClickEvent);

        // $(document).on('click', '.toggle-button',



        function myFunction(event) {
            var search = document.getElementsByClassName("cartodb-searchbox")[0].children[0].children[1]
            var form = document.getElementsByClassName("cartodb-searchbox")[0].children[0].children[2]
            var text = processFormData();
            console.log(text.value);
            search.value = text.value;
            form.click();
        }

        function processFormData() {
            var input = document.getElementById("address-form");
            return input;
        }

        $("#address-form").keypress(function(event) {
            if (event.which == 13) {
                event.preventDefault();
                console.log("entered!");
                myFunction();
            }
        });
    </script>
</body>

</html>
